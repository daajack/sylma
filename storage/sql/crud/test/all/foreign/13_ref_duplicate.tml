<?xml version="1.0" encoding="utf-8"?>
<ns0:test xmlns:ns0="http://2013.sylma.org/modules/stepper">
  <ns0:page>
    <ns0:steps>
      <ns0:call path="/sylma/storage/sql/alter?file=/sylma/storage/sql/crud/test/samples/user_duplicate_refs.xql" method="get"/>
      <ns0:call path="/sylma/storage/sql/alter?file=/sylma/storage/sql/crud/test/samples/user_duplicate_refs_city.xql" method="get"/>
      <ns0:call path="/sylma/storage/sql/alter?file=/sylma/storage/sql/crud/test/samples/user_duplicate_refs_country.xql" method="get"/>
      <ns0:call path="/sylma/storage/sql/alter?file=/sylma/storage/sql/crud/test/samples/user_duplicate_refs_lang.xql" method="get"/>
      <ns0:call path="/sylma/modules/rebuild/standalone?path=/sylma/storage/sql/crud/test/samples/user_duplicate_refs.vml" method="get"/>
      <ns0:query creation="2014-03-23 12:03:12" connection="test">../../samples/user_duplicate_refs.sql</ns0:query>
    </ns0:steps>
  </ns0:page>
  <ns0:page url="/sylma/storage/sql/crud/test/samples/user_duplicate_refs?sylma-reset=1">
    <ns0:steps>
      <ns0:snapshot element="#content &gt; div:nth-child(2) &gt; form &gt; table">
        <ns0:content>{"name":"table","children":[{"name":"thead","children":[{"name":"tr","children":[{"name":"th","children":[{"name":"a","content":"\n \n \n ","position":{"x":215,"y":70},"size":{"x":25,"y":33}}],"position":{"x":214,"y":69},"size":{"x":27,"y":36}},{"name":"th","children":[{"name":"a","content":"id","position":{"x":242,"y":71},"size":{"x":194,"y":30}}],"position":{"x":241,"y":69},"size":{"x":196,"y":36}},{"name":"th","children":[{"name":"a","content":"lang","position":{"x":437,"y":71},"size":{"x":97,"y":30}}],"position":{"x":436,"y":69},"size":{"x":99,"y":36}},{"name":"th","children":[{"name":"a","content":"lang","position":{"x":536,"y":71},"size":{"x":97,"y":30}}],"position":{"x":535,"y":69},"size":{"x":99,"y":36}}],"position":{"x":214,"y":69},"size":{"x":420,"y":36}},{"name":"tr","children":[{"name":"th","content":"","position":{"x":214,"y":105},"size":{"x":27,"y":1}},{"name":"th","children":[{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"span","content":"=","position":{"x":242,"y":106},"size":{"x":15,"y":20}},{"name":"input","content":"","position":{"x":242,"y":106},"size":{"x":193,"y":20}},{"name":"span","content":"✕","position":{"x":419,"y":106},"size":{"x":12,"y":20}}],"position":{"x":242,"y":106},"size":{"x":193,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"span","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"span","content":"✕","position":{"x":0,"y":0},"size":{"x":0,"y":0}}],"position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"button","content":"\n +\n ","position":{"x":326,"y":102},"size":{"x":24,"y":4}}],"position":{"x":241,"y":106},"size":{"x":196,"y":0}}],"position":{"x":241,"y":105},"size":{"x":196,"y":1}},{"name":"th","children":[{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"span","content":"show","position":{"x":470,"y":106},"size":{"x":31,"y":0}},{"name":"span","content":"✕","position":{"x":517,"y":106},"size":{"x":17,"y":26}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"fr","position":{"x":460,"y":108},"size":{"x":9,"y":18}}],"position":{"x":438,"y":106},"size":{"x":32,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"ru","position":{"x":460,"y":108},"size":{"x":12,"y":18}}],"position":{"x":438,"y":106},"size":{"x":35,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"en","position":{"x":460,"y":108},"size":{"x":15,"y":18}}],"position":{"x":438,"y":106},"size":{"x":37,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"fr-local","position":{"x":460,"y":108},"size":{"x":41,"y":18}}],"position":{"x":438,"y":106},"size":{"x":64,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"ru-local","position":{"x":460,"y":108},"size":{"x":45,"y":18}}],"position":{"x":438,"y":106},"size":{"x":68,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":442,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"en-local","position":{"x":460,"y":108},"size":{"x":47,"y":18}}],"position":{"x":438,"y":106},"size":{"x":70,"y":20}}],"position":{"x":438,"y":106},"size":{"x":96,"y":0}}],"position":{"x":436,"y":106},"size":{"x":99,"y":0}}],"position":{"x":436,"y":105},"size":{"x":99,"y":1}},{"name":"th","children":[{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"span","content":"show","position":{"x":569,"y":106},"size":{"x":31,"y":0}},{"name":"span","content":"✕","position":{"x":616,"y":106},"size":{"x":17,"y":26}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"fr","position":{"x":559,"y":108},"size":{"x":9,"y":18}}],"position":{"x":536,"y":106},"size":{"x":32,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"ru","position":{"x":559,"y":108},"size":{"x":12,"y":18}}],"position":{"x":536,"y":106},"size":{"x":35,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"en","position":{"x":559,"y":108},"size":{"x":15,"y":18}}],"position":{"x":536,"y":106},"size":{"x":37,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"fr-local","position":{"x":559,"y":108},"size":{"x":41,"y":18}}],"position":{"x":536,"y":106},"size":{"x":64,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"ru-local","position":{"x":559,"y":108},"size":{"x":45,"y":18}}],"position":{"x":536,"y":106},"size":{"x":68,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}},{"name":"div","children":[{"name":"input","content":"","position":{"x":540,"y":109},"size":{"x":13,"y":13}},{"name":"label","content":"en-local","position":{"x":559,"y":108},"size":{"x":47,"y":18}}],"position":{"x":536,"y":106},"size":{"x":70,"y":20}}],"position":{"x":536,"y":106},"size":{"x":96,"y":0}}],"position":{"x":535,"y":106},"size":{"x":99,"y":0}}],"position":{"x":535,"y":105},"size":{"x":99,"y":1}}],"position":{"x":214,"y":105},"size":{"x":420,"y":1}}],"position":{"x":214,"y":69},"size":{"x":420,"y":37}},{"name":"tbody","children":[{"name":"tr","children":[{"name":"td","content":"","position":{"x":575,"y":41},"size":{"x":0,"y":18}},{"name":"td","children":[{"name":"span","content":"3","position":{"x":575,"y":41},"size":{"x":7,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":106},"size":{"x":23,"y":25}}],"position":{"x":214,"y":106},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"3","position":{"x":248,"y":109},"size":{"x":182,"y":18}}],"position":{"x":241,"y":106},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"fr-local","position":{"x":443,"y":109},"size":{"x":85,"y":18}}],"position":{"x":436,"y":106},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"fr","position":{"x":542,"y":109},"size":{"x":85,"y":18}}],"position":{"x":535,"y":106},"size":{"x":99,"y":26}}],"position":{"x":214,"y":106},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":132},"size":{"x":23,"y":25}}],"position":{"x":214,"y":132},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"2","position":{"x":248,"y":135},"size":{"x":182,"y":18}}],"position":{"x":241,"y":132},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"ru-local","position":{"x":443,"y":135},"size":{"x":85,"y":18}}],"position":{"x":436,"y":132},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"ru","position":{"x":542,"y":135},"size":{"x":85,"y":18}}],"position":{"x":535,"y":132},"size":{"x":99,"y":26}}],"position":{"x":214,"y":132},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":158},"size":{"x":23,"y":25}}],"position":{"x":214,"y":158},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"1","position":{"x":248,"y":162},"size":{"x":182,"y":18}}],"position":{"x":241,"y":158},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"en-local","position":{"x":443,"y":162},"size":{"x":85,"y":18}}],"position":{"x":436,"y":158},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"en","position":{"x":542,"y":162},"size":{"x":85,"y":18}}],"position":{"x":535,"y":158},"size":{"x":99,"y":26}}],"position":{"x":214,"y":158},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"div","children":[{"name":"div","children":[{"name":"a","content":"←","position":{"x":368,"y":191},"size":{"x":42,"y":35}},{"name":"a","content":"1","position":{"x":413,"y":197},"size":{"x":21,"y":24}},{"name":"a","content":"→","position":{"x":437,"y":191},"size":{"x":42,"y":35}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}}],"position":{"x":368,"y":191},"size":{"x":111,"y":35}}],"position":{"x":214,"y":191},"size":{"x":420,"y":35}}],"position":{"x":214,"y":184},"size":{"x":420,"y":50}}],"position":{"x":214,"y":184},"size":{"x":420,"y":50}}],"position":{"x":214,"y":106},"size":{"x":420,"y":129}}],"position":{"x":214,"y":69},"size":{"x":420,"y":166}}</ns0:content>
      </ns0:snapshot>
      <ns0:event name="click" element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; thead &gt; tr &gt; th:nth-child(1) &gt; a"/>
      <ns0:event name="click" element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; thead &gt; tr:nth-child(2) &gt; th:nth-child(3) &gt; div &gt; div:nth-child(9) &gt; div &gt; input"/>
      <ns0:watcher element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:property name="reload"/>
      </ns0:watcher>
      <ns0:snapshot element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:content>{"name":"tbody","children":[{"name":"tr","children":[{"name":"td","content":"","position":{"x":575,"y":41},"size":{"x":0,"y":18}},{"name":"td","children":[{"name":"span","content":"1","position":{"x":575,"y":41},"size":{"x":7,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":133},"size":{"x":23,"y":25}}],"position":{"x":214,"y":133},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"2","position":{"x":248,"y":136},"size":{"x":182,"y":18}}],"position":{"x":241,"y":133},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"ru-local","position":{"x":443,"y":136},"size":{"x":85,"y":18}}],"position":{"x":436,"y":133},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"ru","position":{"x":542,"y":136},"size":{"x":85,"y":18}}],"position":{"x":535,"y":133},"size":{"x":99,"y":26}}],"position":{"x":214,"y":133},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"div","children":[{"name":"div","children":[{"name":"a","content":"←","position":{"x":368,"y":166},"size":{"x":42,"y":35}},{"name":"a","content":"1","position":{"x":413,"y":171},"size":{"x":21,"y":24}},{"name":"a","content":"→","position":{"x":437,"y":166},"size":{"x":42,"y":35}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}}],"position":{"x":368,"y":166},"size":{"x":111,"y":35}}],"position":{"x":214,"y":166},"size":{"x":420,"y":35}}],"position":{"x":214,"y":159},"size":{"x":420,"y":50}}],"position":{"x":214,"y":159},"size":{"x":420,"y":50}}],"position":{"x":214,"y":133},"size":{"x":420,"y":76}}</ns0:content>
      </ns0:snapshot>
      <ns0:event name="click" element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; thead &gt; tr:nth-child(2) &gt; th:nth-child(3) &gt; div &gt; div:nth-child(8) &gt; div &gt; input"/>
      <ns0:watcher element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:property name="reload"/>
      </ns0:watcher>
      <ns0:snapshot element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:content>{"name":"tbody","children":[{"name":"tr","children":[{"name":"td","content":"","position":{"x":575,"y":41},"size":{"x":0,"y":18}},{"name":"td","children":[{"name":"span","content":"2","position":{"x":575,"y":41},"size":{"x":7,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":153},"size":{"x":23,"y":25}}],"position":{"x":214,"y":153},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"3","position":{"x":248,"y":156},"size":{"x":182,"y":18}}],"position":{"x":241,"y":153},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"fr-local","position":{"x":443,"y":156},"size":{"x":85,"y":18}}],"position":{"x":436,"y":153},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"fr","position":{"x":542,"y":156},"size":{"x":85,"y":18}}],"position":{"x":535,"y":153},"size":{"x":99,"y":26}}],"position":{"x":214,"y":153},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":179},"size":{"x":23,"y":25}}],"position":{"x":214,"y":179},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"2","position":{"x":248,"y":182},"size":{"x":182,"y":18}}],"position":{"x":241,"y":179},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"ru-local","position":{"x":443,"y":182},"size":{"x":85,"y":18}}],"position":{"x":436,"y":179},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"ru","position":{"x":542,"y":182},"size":{"x":85,"y":18}}],"position":{"x":535,"y":179},"size":{"x":99,"y":26}}],"position":{"x":214,"y":179},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"div","children":[{"name":"div","children":[{"name":"a","content":"←","position":{"x":368,"y":212},"size":{"x":42,"y":35}},{"name":"a","content":"1","position":{"x":413,"y":218},"size":{"x":21,"y":24}},{"name":"a","content":"→","position":{"x":437,"y":212},"size":{"x":42,"y":35}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}}],"position":{"x":368,"y":212},"size":{"x":111,"y":35}}],"position":{"x":214,"y":212},"size":{"x":420,"y":35}}],"position":{"x":214,"y":205},"size":{"x":420,"y":50}}],"position":{"x":214,"y":205},"size":{"x":420,"y":50}}],"position":{"x":214,"y":153},"size":{"x":420,"y":102}}</ns0:content>
      </ns0:snapshot>
      <ns0:event name="click" element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; thead &gt; tr:nth-child(2) &gt; th:nth-child(4) &gt; div &gt; div:nth-child(5) &gt; div &gt; label"/>
      <ns0:watcher element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:property name="reload"/>
      </ns0:watcher>
      <ns0:snapshot element="#content &gt; div:nth-child(2) &gt; form &gt; table &gt; tbody">
        <ns0:content>{"name":"tbody","children":[{"name":"tr","children":[{"name":"td","content":"","position":{"x":575,"y":41},"size":{"x":0,"y":18}},{"name":"td","children":[{"name":"span","content":"1","position":{"x":575,"y":41},"size":{"x":7,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}}],"position":{"x":575,"y":41},"size":{"x":58,"y":18}},{"name":"tr","children":[{"name":"td","children":[{"name":"a","content":"\n \n ","position":{"x":215,"y":153},"size":{"x":23,"y":25}}],"position":{"x":214,"y":153},"size":{"x":27,"y":26}},{"name":"td","children":[{"name":"div","content":"3","position":{"x":248,"y":156},"size":{"x":182,"y":18}}],"position":{"x":241,"y":153},"size":{"x":196,"y":26}},{"name":"td","children":[{"name":"div","content":"fr-local","position":{"x":443,"y":156},"size":{"x":85,"y":18}}],"position":{"x":436,"y":153},"size":{"x":99,"y":26}},{"name":"td","children":[{"name":"div","content":"fr","position":{"x":542,"y":156},"size":{"x":85,"y":18}}],"position":{"x":535,"y":153},"size":{"x":99,"y":26}}],"position":{"x":214,"y":153},"size":{"x":420,"y":26}},{"name":"tr","children":[{"name":"td","children":[{"name":"div","children":[{"name":"div","children":[{"name":"a","content":"←","position":{"x":368,"y":186},"size":{"x":42,"y":35}},{"name":"a","content":"1","position":{"x":413,"y":191},"size":{"x":21,"y":24}},{"name":"a","content":"→","position":{"x":437,"y":186},"size":{"x":42,"y":35}},{"name":"input","content":"","position":{"x":0,"y":0},"size":{"x":0,"y":0}}],"position":{"x":368,"y":186},"size":{"x":111,"y":35}}],"position":{"x":214,"y":186},"size":{"x":420,"y":35}}],"position":{"x":214,"y":179},"size":{"x":420,"y":50}}],"position":{"x":214,"y":179},"size":{"x":420,"y":50}}],"position":{"x":214,"y":153},"size":{"x":420,"y":76}}</ns0:content>
      </ns0:snapshot>
    </ns0:steps>
  </ns0:page>
</ns0:test>