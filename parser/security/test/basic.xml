<?xml version="1.0" encoding="utf-8"?>
<tst:tests
  xmlns:tst="http://2013.sylma.org/parser/security/test"
  xmlns="http://www.sylma.org"
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns:le="http://www.sylma.org/parser/action"
  xmlns:lm="http://www.sylma.org/parser/action/basic"
>
  <tst:description>Basic</tst:description>
  <tst:test name="Read tester01">
    <tst:prepare>
      $controler->setUser('tester01');
      $controler->setArgument('action', $controler->getAction('samples/read'));
    </tst:prepare>
    <tst:node>
      <div xmlns="http://www.sylma.org"><h1>hello</h1><h2 id="test">hello</h2><h3>hello</h3><h6>hello</h6><span>world</span></div>
    </tst:node>
    <tst:expected>
      $action = $controler->getArgument('action');
      $node = $controler->getArgument('node');

      return
        $controler->compareNodes($action->asDOM(), $node);
    </tst:expected>
  </tst:test>
  <tst:test name="Read tester02">
    <tst:prepare>
      $controler->setUser('tester02');
      $controler->setArgument('action', $controler->getAction('samples/read'));
    </tst:prepare>
    <tst:node>
      <div xmlns="http://www.sylma.org"><h1>hello</h1><h3>hello</h3><h6>hello</h6><span>world</span></div>
    </tst:node>
    <tst:expected>
      $action = $controler->getArgument('action');
      $node = $controler->getArgument('node');

      return
        $controler->compareNodes($action->asDOM(), $node);
    </tst:expected>
  </tst:test>
  <tst:test name="Read tester03">
    <tst:prepare>
      $controler->setUser('tester03');
      $controler->setArgument('action', $controler->getAction('samples/read'));
    </tst:prepare>
    <tst:node>
      <div xmlns="http://www.sylma.org"><h1>hello</h1><h5>hello</h5><h6>hello</h6><span>world</span></div>
    </tst:node>
    <tst:expected>
      $action = $controler->getArgument('action');
      $node = $controler->getArgument('node');

      return
        $controler->compareNodes($action->asDOM(), $node);
    </tst:expected>

  </tst:test>
  <tst:test name="Embed tester01">
    <tst:prepare>
      $controler->setUser('tester01');
      $controler->setArgument('action', $controler->getAction('samples/embed'));
    </tst:prepare>
    <tst:node>
      <div xmlns="http://www.sylma.org"><h1><span>Hello <strong>world</strong></span></h1></div>
    </tst:node>
    <tst:expected>
      $action = $controler->getArgument('action');
      $node = $controler->getArgument('node');

      return
        $controler->compareNodes($action->asDOM(), $node);
    </tst:expected>

  </tst:test>
  <tst:test name="Embed tester02">
    <tst:prepare>
      $controler->setUser('tester02');
      $controler->setArgument('action', $controler->getAction('samples/embed'));
    </tst:prepare>
    <tst:node>
      <div xmlns="http://www.sylma.org"></div>
    </tst:node>
    <tst:expected>
      $action = $controler->getArgument('action');
      $node = $controler->getArgument('node');

      return
        $controler->compareNodes($action->asDOM(), $node);
    </tst:expected>

  </tst:test>
</tst:tests>